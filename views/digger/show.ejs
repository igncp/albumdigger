<script type="text/javascript" src="/js/digger/digger.js"></script>

<p>This is an information-seeker site for albums. Please, type the band name and the album name correctly. Then, you'll see several results depending on the source. It's built using <strong>Node.js</strong>, <strong>Backbone.js</strong>, <strong>D3.js</strong> and the <strong>Discogs API</strong> as main technologies.</p>

<div id="releases" style="display: none" class="shadow-border"></div>
<div class="singleRelease shadow-border" style="display: none"></div>
<form id="search-form" style="display: none">
  <div id="search-form-inputs" class="shadow-border"><table>
    <tr>
      <td>The band: </td>
      <td><input id="band-name" type="text" name="band"></td>
    </tr>
    <tr>
      <td>The album title: </td>
      <td><input id="album-name" type="text" name="album"></td>
    </tr>
    <tr>
      <td colspan="2"><input type="submit" value="Search" id="submitter" class="btn btn-primary"></td>
    </tr>
  </table></div>
  <p id="validation-error-message" class="alert alert-warning" role="alert">You must enter values in the album and the band fields</p>
</form>

<script type="text/template" id="release-row">
    <div class="release-row">
      <%= title %> (genre: <%= genre %>, year: <%= typeof(year)!== 'undefined' ?  year : '-' %>, label: <%= label %>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="release-link btn btn-default" href="#">Link</a>
    </div>
</script>

<script type="text/template" id="releases-list">
  <p><a href="" class="btn btn-info back">Back</a></p>
  <p class="releases-results"><strong>Results:</strong> <%= result_count %> </p>
  <div><form>
    <p><strong>Filter:</strong></p>
    <ul>
      <li><input type="radio" id="filter-none" value="filter-none" name="filter"> <label for="filter-none">None</label></li>
      <li><input type="radio" id="filter-band" value="filter-band" name="filter"> <label for="filter-band">The band appears</label></li>
      <li><input type="radio" id="filter-all" value="filter-all" name="filter"> <label for="filter-all">The band and the album appears</label> </li>
    </ul>
  </form></div>
  <p><strong>First five:</strong></p>
  <ul class="list-five"></ul>
  <div style="position: relative; width: 100%">
  <div class="toggle-charts"><a class="btn btn-primary" href="">Hide charts</a></div>
  <div id="charts">
    <p><strong>Charts:</strong></p>
  </div>
  </div>
  <ul class="list-rest"></ul>
  <p><strong>Discogs search <a href="http://api.discogs.com" target="_blank">API</a></strong></p>
  <p><a href="" class="btn btn-info back">Back</a></p>
</script>

<script type="text/template" id="release">
    <p class="title"><%= title %></p>
    <p>Artists: <%= artists[0].name %></p>
    <p>Genre: <%= genres[0] %></p>
    
    <% if (typeof(released) !== 'undefined') {%>
      <p>Year: <%= released %></p>
    <% }; %>

    <% if (typeof(country)!=='undefined') {%>
        <p>Record country: <%= country %></p>
    <% }%>
    <p>Record label: <%= labels[0].name %></p>
    <p>Record format: <%= formats[0].name %></p>
    <p>Source link: <a href="<%= uri %>">···</a></p>
    <p>Tracklist:</p>
    
    <ul>
      <%= _.map(tracklist, function (track,index){return '<li>' + (index + 1) + ': ' + track.title + ' | ' + track.videoLink + ' | ' + track.lyricsLink + '</li>';}).join("") %>
      <% if (typeof(notes)!=='undefined') {%>
        <p class="notes">Notes:</p>
        <p><%= notes.replace(/\n/, '</br>') %></p>
      <% }%>
    </ul>
    
    <p><a href="" class="back btn btn-info">Back</a></p>
</script>